<!--
@license
Copyright (c) 2015 Marc Kronberg. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<script>
    ArgonSwipeLeftRightBehavior = {

        properties: {
            transition: {
                type: String,
                value: '300ms cubic-bezier(0.4, 0.0, 0.2, 1)'
            }
        },
        listeners: {},
        _onTrack: function (event) {
            if (this.disabled) return;

            var target = event.currentTarget;
            if (target.classList.contains('disable-swipe')) return;

            var track = event.detail;
            if (track.state === 'start') {
                this._trackStart(track, target);

            } else if (track.state === 'track') {
                this._trackMove(track, target);

            } else if (track.state === 'end') {
                this._trackEnd(track, target);
            }
        },

        _trackStart: function (event, target) {
            // Save the width of the element, so that we don't trigger a style
            // recalc every time we need it.
            this._nodeWidth = target.offsetWidth;
            target.style.transition = 'none';
        },

        _trackMove: function (event, target) {
            this.swipeAnimate(event.dx, target);
        },

        _trackEnd: function (event, target) {
            // The element is swiped away if it's moved halfway its total width.
            this._swipeComplete = Math.abs(event.dx) > this._nodeWidth / 2;
            this.swipeDirection = event.dx > 0;
            this.swipeEnd(this.swipeDirection, target);
        },
        swipeAnimate: function (dx, target) {
            console.log('Overwrite this! swipeAnimate', dx); //, target);
        },
        swipeEnd: function (target) {
            console.log('Overwrite this! swipeEnd', this.swipeDirection);
        }
    };
</script>
